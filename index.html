<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ÁîüÊó•Âø´Ê®Ç ‚ú®</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      overflow: hidden;
      height: 100%;
      font-family: 'Segoe UI', sans-serif;
    }

    .background {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
    }

    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      animation: twinkle 4s infinite ease-in-out;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }

    .meteor {
      position: absolute;
      width: 100px;
      height: 2px;
      background: linear-gradient(270deg, white, transparent);
      transform: rotate(-45deg);
      animation: meteor 3s linear infinite;
    }

    @keyframes meteor {
      0% {
        top: -100px;
        left: 120%;
        opacity: 1;
      }
      100% {
        top: 120%;
        left: -200px;
        opacity: 0;
      }
    }

    .container {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      color: white;
    }

    #giftBox {
      width: 200px;
      height: 200px;
      cursor: pointer;
    }

    #hint {
      color: #fff;
      margin-top: 10px;
      font-size: 1.2em;
      animation: blink 1.5s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    #messageBox {
      display: none;
      font-size: 2em;
      text-align: center;
      white-space: pre-wrap;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
      100% { transform: translateY(0); }
    }

    .glow {
      text-shadow: 0 0 5px #fff, 0 0 15px #ff69b4, 0 0 20px #ff69b4;
    }

    .zoom {
      animation: zoomIn 1s ease-out forwards;
    }

    @keyframes zoomIn {
      0% { transform: scale(1); }
      100% { transform: scale(1.4); }
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 5;
      pointer-events: none;
    }
  </style>
</head>
<body>

<div class="background" id="background"></div>

<div class="container">
  <img src="gift.gif" alt="Á¶ÆÁâ©Áõí" id="giftBox">
  <div id="hint">ÈªûüéÅ ÈñãËÅ≤Èü≥ÈñãËÅ≤Èü≥ÔºÅÔºÅ</div>
  <div id="messageBox" class="glow"></div>
</div>

<audio id="bgMusic" loop>
  <source src="birthday-song.mp3" type="audio/mpeg">
</audio>

<canvas id="fireworks"></canvas>

<script>
  // ÊòüÁ©∫ËÉåÊôØ
  const bg = document.getElementById('background');
  for (let i = 0; i < 100; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.top = Math.random() * 100 + '%';
    star.style.left = Math.random() * 100 + '%';
    star.style.animationDelay = Math.random() * 4 + 's';
    bg.appendChild(star);
  }

  for (let i = 0; i < 3; i++) {
    const meteor = document.createElement('div');
    meteor.className = 'meteor';
    meteor.style.top = `${Math.random() * 50}%`;
    meteor.style.left = `${Math.random() * 100}%`;
    meteor.style.animationDelay = `${Math.random() * 5}s`;
    bg.appendChild(meteor);
  }

  // Èü≥Ê®Ç
  const music = document.getElementById("bgMusic");

  // ÊâìÂ≠óÂãïÁï´ + Ê∂àÂ§±
  const messages = [
    "SURPRISE ü•≥",
    "ÁîúÂìÅÈÇÑÊòØÈÄôÂÄã",
    "ÈÉΩÊòØÊàë‰∏ÄÊ¨°ÂºÑÂì¶",
    "Âà•Â´åÊ£ÑÂêñ",
    "‰∏çÂ•ΩÂêÉDeË©±",
    "ÂòªÂòª Áµ¶ÊàëÂêÉ!!",
    "Â¶ÇÊûúÊúâ‰∏ÄÂ§©ÈÅéÂæó‰∏çÂ¶ÇÊÑè‰∫Ü",
    "Âõû‰æÜÈÄôË£°ÁúãÁúãÂîÑ",
    "Â∏åÊúõ‰Ω†ÂñúÊ≠° üíñ",
    "Âô¢~Â∞ç‰∫Ü",
    "ÁîüÊó•Âø´Ê®Ç ‚ú®"
  ];

  const messageBox = document.getElementById("messageBox");
  const hint = document.getElementById("hint");
  const gift = document.getElementById("giftBox");

  let playing = false;

  gift.onclick = async () => {
    if (playing) return;
    playing = true;
    gift.style.display = 'none';
    hint.style.display = 'none';
    messageBox.style.display = 'block';
    music.play().catch(() => {});
    while (true) {
      for (let i = 0; i < messages.length; i++) {
        const text = messages[i];
        messageBox.textContent = '';
        if (text.includes("ÁîüÊó•Âø´Ê®Ç")) {
          messageBox.classList.add('zoom');
        } else {
          messageBox.classList.remove('zoom');
        }

        for (let j = 0; j <= text.length; j++) {
          messageBox.textContent = text.slice(0, j);
          await new Promise(res => setTimeout(res, 100));
        }

        await new Promise(res => setTimeout(res, 2000));
        messageBox.style.opacity = '0';
        await new Promise(res => setTimeout(res, 500));
        messageBox.style.opacity = '1';
      }
    }
  };

  // ÁÖôËä±
  const canvas = document.getElementById("fireworks");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  function Firework() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height / 2;
    this.radius = 1;
    this.alpha = 1;
    this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
    this.particles = [];

    for (let i = 0; i < 30; i++) {
      const angle = Math.random() * 2 * Math.PI;
      const speed = Math.random() * 4 + 2;
      this.particles.push({
        x: this.x,
        y: this.y,
        dx: Math.cos(angle) * speed,
        dy: Math.sin(angle) * speed,
        alpha: 1
      });
    }
  }

  const fireworks = [];

  function animate() {
    requestAnimationFrame(animate);
    ctx.fillStyle = "rgba(0,0,0,0.2)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    if (Math.random() < 0.05) {
      fireworks.push(new Firework());
    }

    fireworks.forEach((fw, i) => {
      fw.particles.forEach(p => {
        p.x += p.dx;
        p.y += p.dy;
        p.alpha -= 0.015;
        ctx.beginPath();
        ctx.arc(p.x, p.y, 2, 0, 2 * Math.PI);
        ctx.fillStyle = `rgba(${fw.color}, ${p.alpha})`;
        ctx.fill();
      });
      if (fw.particles.every(p => p.alpha <= 0)) {
        fireworks.splice(i, 1);
      }
    });
  }

  animate();
</script>
</body>
</html>
