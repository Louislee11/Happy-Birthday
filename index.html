<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ç”Ÿæ—¥é©šå–œ âœ¨</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: #000;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      color: #fff;
    }
    /* èƒŒæ™¯å±¤ */
    #background { position:fixed; top:0; left:0; width:100%; height:100%; z-index:0; pointer-events:none; }
    .star {
      position:absolute; width:2px; height:2px; background:#fff; border-radius:50%;
      animation:twinkle 3s infinite ease-in-out;
    }
    @keyframes twinkle { 0%,100%{opacity:0.2;}50%{opacity:1;} }
    .meteor {
      position:absolute; width:120px; height:2px;
      background: linear-gradient(to left, #fff, transparent);
      transform:rotate(45deg);
      animation:shoot 2s linear infinite;
    }
    @keyframes shoot { 0%{opacity:1;}100%{opacity:0; transform:translate(500px,500px) rotate(45deg);} }
    /* ç…™èŠ± Canvas */
    #fireworks { position:fixed; top:0; left:0; width:100%; height:100%; z-index:1; pointer-events:none; display:none; }
    /* äº’å‹•å…§å®¹ */
    .container {
      position:relative; z-index:2;
      width:100%; height:100%;
      display:flex; flex-direction:column;
      justify-content:center; align-items:center;
      text-align:center; pointer-events:auto;
    }
    #giftBox { width:200px; cursor:pointer; }
    #hint {
      margin-top:10px; font-size:1.2rem; color:#ffeb3b;
      animation:blink 1.5s infinite; pointer-events:none;
    }
    @keyframes blink {0%,100%{opacity:1;}50%{opacity:0.3;}}
    .message {
      font-size:1.8rem; white-space:nowrap; opacity:0;
      animation:float 4s ease-in-out, glow 2s ease-in-out infinite alternate;
    }
    @keyframes float { 0%{transform:translateY(10px);opacity:0;}10%,90%{opacity:1;}100%{transform:translateY(-10px);opacity:0;} }
    @keyframes glow { from{text-shadow:0 0 5px #fff,0 0 10px #ff69b4;} to{text-shadow:0 0 20px #ff66cc,0 0 30px #ffccff;} }
    .final {
      font-size:2.2rem; font-weight:bold;
      animation:finalZoom 2s ease-in-out infinite alternate, glow 2s ease-in-out infinite alternate;
    }
    @keyframes finalZoom { from{transform:scale(1);} to{transform:scale(1.5);} }
  </style>
</head>
<body>

<div id="background"></div>
<canvas id="fireworks"></canvas>

<div class="container">
  <div id="giftBox">
    <img src="gift.gif" width="160" alt="ç¦®ç‰©ç›’">
    <div id="hint">é»æˆ‘ ğŸ</div>
  </div>
  <div id="messageContainer"></div>
  <audio id="bgMusic" src="your-music.mp3" loop></audio>
</div>

<script>
  // 100 é¡†é–ƒçˆæ˜Ÿæ˜Ÿ
  for (let i = 0; i < 100; i++) {
    let s = document.createElement('div');
    s.className = 'star';
    s.style.top = Math.random()*100 + 'vh';
    s.style.left = Math.random()*100 + 'vw';
    s.style.animationDelay = Math.random()*3 + 's';
    document.getElementById('background').appendChild(s);
  }
  // 7 æ¢éš¨æ©Ÿåˆ†æ•£æµæ˜Ÿ
  for (let i = 0; i < 7; i++) {
    let m = document.createElement('div');
    m.className = 'meteor';
    if (Math.random()<0.5) {
      m.style.top = Math.random()*40 + '%';
      m.style.left = '-20%';
    } else {
      m.style.top = '-20%';
      m.style.left = Math.random()*100 + '%';
    }
    m.style.animationDelay = Math.random()*3 + 's';
    document.getElementById('background').appendChild(m);
  }

  // ç…™èŠ±å‹•ç•«
  const canvas = document.getElementById('fireworks');
  const ctx = canvas.getContext('2d');
  canvas.width = innerWidth; canvas.height = innerHeight;
  class Firework {
    constructor(){
      this.particles = [];
      this.h = Math.random()*360;
      let x = Math.random()*canvas.width,
          y = Math.random()*(canvas.height/2);
      for(let i=0;i<30;i++){
        let a=Math.random()*2*Math.PI, v=Math.random()*3+2;
        this.particles.push({x,y,dx:Math.cos(a)*v,dy:Math.sin(a)*v,a:1});
      }
    }
  }
  let fws = [];
  function drawFW(){
    requestAnimationFrame(drawFW);
    ctx.fillStyle = 'rgba(0,0,0,0.2)';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    if (Math.random()<0.05) fws.push(new Firework());
    fws.forEach((fw,idx)=>{
      fw.particles.forEach(p=>{
        p.x+=p.dx; p.y+=p.dy; p.a-=0.02;
        ctx.beginPath();
        ctx.arc(p.x,p.y,3,0,2*Math.PI);
        ctx.fillStyle = `hsla(${fw.h},100%,60%,${p.a})`;
        ctx.fill();
      });
      if (fw.particles.every(p=>p.a<=0)) fws.splice(idx,1);
    });
  }

  // æ–‡å­—èˆ‡äº¤äº’
  const msgs = [
    "Surprise~~","ç„¡è«–æ˜¯ç”œå“é‚„æ˜¯é€™å€‹","éƒ½æ˜¯æˆ‘ä¸€æ¬¡å¼„å“¦","åˆ¥å«Œæ£„å–",
    "ä¸å¥½åƒä¹Ÿå¾—åƒ!!","å˜»å˜»","å¸Œæœ›ä½ å–œæ­¡ ğŸ’–","å¦‚æœæœ‰ä¸€å¤©éå¾—ä¸å¦‚æ„äº†",
    "å›ä¾†é€™è£¡çœ‹çœ‹å”„","å™¢~å°äº†","ç”Ÿæ—¥å¿«æ¨‚ âœ¨"
  ];
  const gift = document.getElementById('giftBox'),
        hint = document.getElementById('hint'),
        cont = document.getElementById('messageContainer'),
        music = document.getElementById('bgMusic');

  gift.addEventListener('click', async()=>{
    // æ¸…é™¤èƒŒæ™¯æ˜Ÿæ˜Ÿèˆ‡æµæ˜Ÿ
    document.getElementById('background').innerHTML = '';
    // é¡¯ç¤ºç…™èŠ±
    canvas.style.display = 'block';
    drawFW();
    // éš±è—ç¦®ç‰©
    gift.style.display = 'none'; hint.style.display = 'none';
    music.play().catch(()=>{});
    // é€å¥æ‰“å­— + æ•ˆæœ
    while(true){
      for(let i=0;i<msgs.length;i++){
        cont.innerHTML = '';
        let div = document.createElement('div');
        div.className = (i===msgs.length-1?'final':'message');
        cont.appendChild(div);
        for(let j=1;j<=msgs[i].length;j++){
          div.textContent = msgs[i].slice(0,j);
          await new Promise(r=>setTimeout(r,80));
        }
        await new Promise(r=>setTimeout(r,2000));
        div.style.opacity = 0;
        await new Promise(r=>setTimeout(r,500));
        div.style.opacity = 1;
      }
    }
  });
</script>
</body>
</html>
