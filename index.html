<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç”Ÿæ—¥å¿«æ¨‚å™¢</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { width:100%; height:100%; overflow:hidden; background:#000; font-family:'Segoe UI',sans-serif; }

    /* èƒŒæ™¯æ˜Ÿæ˜Ÿ */
    #background { position:fixed; top:0; left:0; width:100%; height:100%; z-index:0; pointer-events:none; }
    .star { position:absolute; width:2px; height:2px; background:#fff; border-radius:50%; animation:twinkle 2s infinite ease-in-out; }
    @keyframes twinkle { 0%,100%{opacity:0.2;} 50%{opacity:1;} }

    /* æµæ˜Ÿæ•´é«”å®¹å™¨ */
    .meteor {
      position: absolute;
      width: 140px;
      height: 14px;
      pointer-events: none;
      transform: rotate(45deg);
      animation: shoot linear infinite;
    }
    @keyframes shoot {
      0% { opacity: 1; transform: translate(0,0) rotate(45deg); }
      100% { opacity: 0; transform: translate(600px,600px) rotate(45deg); }
    }

    /* æµæ˜Ÿé ­ */
    .meteor .head {
      position: absolute;
      top: 0;
      left: 126px; /* ç·Šè²¼å°¾å·´æœ«ç«¯ */
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: radial-gradient(circle at center, #fff 0%, rgba(255,182,193,0.8) 50%, transparent 80%);
      box-shadow: 0 0 12px rgba(255,182,193,0.8), 0 0 20px rgba(255,192,203,0.6);
    }

    /* æµæ˜Ÿå°¾å·´ */
    .meteor .tail {
      position: absolute;
      top: 5px;
      left: 0;
      width: 120px;
      height: 4px;
      background: linear-gradient(to left, rgba(255,192,203,0.8), rgba(255,182,193,0.4), transparent);
      border-radius: 2px;
      filter: blur(2px);
    }

    /* å°¾éƒ¨é–ƒçˆç²’å­ */
    .meteor .sparkle {
      position: absolute;
      width: 4px; height: 4px;
      background: #fff;
      border-radius:50%;
      opacity:0.7;
      animation: sparkle 1.2s infinite ease-in-out;
    }
    @keyframes sparkle {
      0%,100% { opacity:0.2; transform: translateY(0); }
      50% { opacity:1; transform: translateY(-5px); }
    }

    /* ç…™èŠ± */
    #fireworks { position:fixed; top:0; left:0; width:100%; height:100%; z-index:1; pointer-events:none; display:none; }

    /* äº’å‹•å…§å®¹ */
    .container { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); z-index:2; display:flex; flex-direction:column; align-items:center; pointer-events:auto; }
    #giftBox { cursor:pointer; }
    #hint { margin-top:8px; font-size:1.2rem; color:#ffeb3b; animation:blink 1.5s infinite; pointer-events:none; }
    @keyframes blink { 0%,100%{opacity:1;} 50%{opacity:0.3;} }

    #messageContainer { margin-top:20px; display:flex; flex-direction:column; align-items:center; }
    .message { color:#fff; font-size:1.8rem; white-space:nowrap; opacity:0; animation:float 4s ease-in-out, glow 2s ease-in-out infinite alternate; }
    @keyframes float { 0%{transform:translateY(10px);opacity:0;} 10%,90%{opacity:1;} 100%{transform:translateY(-10px);opacity:0;} }
    @keyframes glow { from{text-shadow:0 0 5px #fff,0 0 10px #ff69b4;} to{text-shadow:0 0 30px #ff66cc,0 0 40px #ffccff;} }
    .final { color:#fff; font-size:2.2rem; font-weight:bold; animation:finalZoom 1s ease-in-out infinite alternate, glow 3s ease-in-out infinite alternate; }
    @keyframes finalZoom { from{transform:scale(1);} to{transform:scale(1.5);} }

  </style>
</head>
<body>
  <div id="background"></div>
  <canvas id="fireworks"></canvas>
  <div class="container">
    <div id="giftBox">
      <img src="gift.gif" width="160" alt="ç¦®ç‰©ç›’">
      <div id="hint">é»ğŸ é–‹è²éŸ³é–‹è²éŸ³!!</div>
    </div>
    <div id="messageContainer"></div>
    <audio id="bgMusic" src="birthday-song.mp3" loop></audio>
  </div>

  <script>
    // èƒŒæ™¯æ˜Ÿæ˜Ÿ
    const bg = document.getElementById('background');
    for(let i=0; i<100; i++){
      const s = document.createElement('div');
      s.className = 'star';
      s.style.top = Math.random()*100 + 'vh';
      s.style.left = Math.random()*100 + 'vw';
      s.style.animationDelay = Math.random()*3 + 's';
      bg.appendChild(s);
    }

    // æµæ˜Ÿ
    function launchMeteor(){
      const m = document.createElement('div');
      m.className = 'meteor';
      // éš¨æ©Ÿèµ·é»
      m.style.left = Math.random()*window.innerWidth*0.8 + 'px';
      m.style.top  = Math.random()*window.innerHeight*0.5 + 'px';
      m.style.animationDuration = (2 + Math.random()*1) + 's';
      m.style.animationDelay = Math.random()*2 + 's';

      // ä¸»é«”
      const tail = document.createElement('div');
      tail.className = 'tail';
      m.appendChild(tail);

      const head = document.createElement('div');
      head.className = 'head';
      m.appendChild(head);

      // ç²’å­
      for(let i=0;i<3;i++){
        const p = document.createElement('div');
        p.className = 'sparkle';
        p.style.left = (20 + Math.random()*80) + 'px';
        p.style.top  = (Math.random()*6 + 4) + 'px';
        p.style.animationDelay = Math.random()+'s';
        m.appendChild(p);
      }

      bg.appendChild(m);
      // æ¸…é™¤
      setTimeout(()=>bg.removeChild(m), 3500);
    }
    // å®šæ™‚ç™¼å°„
    for(let i=0;i<15;i++){
      setTimeout(()=> launchMeteor(), i*400);
    }
    setInterval(launchMeteor, 2500);

    // ç…™èŠ± & æ–‡å­—äº’å‹•ï¼ˆä¿æŒåŸæ¨£ï¼‰
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    class Particle {
      constructor(x,y,c){const a=Math.random()*2*Math.PI,s=1+Math.random()*2;this.x=x;this.y=y;this.dx=Math.cos(a)*s;this.dy=Math.sin(a)*s;this.alpha=1;this.color=c;this.size=2+Math.random()*2;}
      update(){this.x+=this.dx;this.y+=this.dy;this.alpha-=0.015;}
      draw(){ctx.globalAlpha=this.alpha;ctx.fillStyle=this.color;ctx.beginPath();ctx.arc(this.x,this.y,this.size,0,Math.PI*2);ctx.fill();ctx.globalAlpha=1;}
    }
    class Firework{constructor(){this.particles=[];const x=Math.random()*canvas.width,y=Math.random()*canvas.height*0.5,h=Math.floor(Math.random()*360);for(let i=0;i<20;i++){this.particles.push(new Particle(x,y,`hsl(${(h+Math.random()*60)%360},100%,60%)`));}}}
    const fireworks=[];function animateFireworks(){requestAnimationFrame(animateFireworks);ctx.fillStyle='rgba(0,0,0,0.2)';ctx.fillRect(0,0,canvas.width,canvas.height);if(Math.random()<0.05)fireworks.push(new Firework());fireworks.forEach((fw,i)=>{fw.particles.forEach(p=>{p.update();p.draw();});if(fw.particles.every(p=>p.alpha<=0))fireworks.splice(i,1);} )}
    const msgs=["SURPRISE ğŸ¥³","ç¬¬ä¸€æ¬¡å¼„çš„å“¦â˜ºï¸","ç”œå“é‚„æ˜¯...é€™å€‹","ä¸å¥½åƒdeè©±","å˜»å˜»å˜»å˜»ğŸ˜","çµ±çµ±çµ¦æˆ‘åƒä¸‹å»!!","å¾—ç©ºå¸¸å›ä¾†çœ‹çœ‹å”„","å¸Œæœ›ä½ å–œæ­¡ ğŸ’–","å™¢~å°äº†","ç”Ÿæ—¥å¿«æ¨‚ âœ¨"];
    const gift=document.getElementById('giftBox'),hint=document.getElementById('hint'),msgC=document.getElementById('messageContainer'),music=document.getElementById('bgMusic');
    gift.addEventListener('click',async()=>{
      document.getElementById('background').innerHTML='';
      canvas.style.display='block';animateFireworks();
      gift.style.display='none';hint.style.display='none';
      music.play().catch(()=>{});
      while(1){
        for(let i=0;i<msgs.length;i++){
          msgC.innerHTML='';let d=document.createElement('div');d.className=i===msgs.length-1?'final':'message';msgC.appendChild(d);
          for(let j=1;j<=msgs[i].length;j++){d.textContent=msgs[i].slice(0,j);await new Promise(r=>setTimeout(r,100));}
          await new Promise(r=>setTimeout(r,1000));d.style.opacity='0';await new Promise(r=>setTimeout(r,308));d.style.opacity='1';
        }
      }
    });
  </script>
</body>
</html>
