<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÁîüÊó•ÊÇ¶ÁßÄ</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      overflow: hidden;
      height: 100%;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 0;
    }

    #container {
      position: absolute;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 2;
    }

    #gift {
      width: 100px;
      cursor: pointer;
      transition: transform 0.3s;
      z-index: 3;
    }
    #gift:hover {
      transform: scale(1.1);
    }

    #messages {
      margin-top: 20px;
      font-size: 24px;
      text-shadow: 0 0 10px #fff;
    }
    .message {
      opacity: 0;
      animation: floatIn 1s ease forwards;
      animation-delay: 0.5s;
    }

    @keyframes floatIn {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .glow {
      animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 10px #fff;
      }
      to {
        text-shadow: 0 0 20px #ff99ff;
      }
    }

    .final {
      font-size: 30px;
      animation: zoomIn 2s ease forwards;
    }

    @keyframes zoomIn {
      0% {
        transform: scale(1);
      }
      100% {
        transform: scale(2);
        text-shadow: 0 0 40px #ffccff;
      }
    }
  </style>
</head>
<body>
  <canvas id="bg"></canvas>
  <canvas id="fireworks"></canvas>
  <div id="container">
    <img id="gift" src="gift.gif" alt="gift" />
    <div id="messages"></div>
  </div>
  <audio id="boom" src="birthday-song.mp3"></audio>

  <script>
    // ======================= ÊòüÁ©∫ËÉåÊôØ + ÊòüÊòü =======================
    const bgCanvas = document.getElementById("bg");
    const bgCtx = bgCanvas.getContext("2d");
    let stars = [];

    function resize() {
      bgCanvas.width = window.innerWidth;
      bgCanvas.height = window.innerHeight;
    }

    function createStars(count) {
      stars = [];
      for (let i = 0; i < count; i++) {
        stars.push({
          x: Math.random() * window.innerWidth,
          y: Math.random() * window.innerHeight,
          radius: Math.random() * 1.5,
          alpha: Math.random(),
          delta: Math.random() * 0.02,
        });
      }
    }

    function drawStars() {
      bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
      stars.forEach((s) => {
        bgCtx.beginPath();
        bgCtx.arc(s.x, s.y, s.radius, 0, Math.PI * 2);
        bgCtx.fillStyle = `rgba(255, 255, 255, ${s.alpha})`;
        bgCtx.fill();

        s.alpha += s.delta;
        if (s.alpha <= 0 || s.alpha >= 1) s.delta *= -1;
      });
    }

    resize();
    createStars(100);
    setInterval(drawStars, 50);
    window.addEventListener("resize", () => {
      resize();
      createStars(100);
    });

    // ======================= ÊµÅÊòü =======================
    const meteors = [];
    for (let i = 0; i < 7; i++) {
      meteors.push({
        x: Math.random() * window.innerWidth,
        y: Math.random() * window.innerHeight / 2,
        speed: 5 + Math.random() * 3,
        length: 100 + Math.random() * 100
      });
    }

    function drawMeteors() {
      meteors.forEach((m) => {
        m.x += m.speed;
        m.y += m.speed;
        bgCtx.beginPath();
        const grad = bgCtx.createLinearGradient(m.x, m.y, m.x - m.length, m.y - m.length);
        grad.addColorStop(0, "white");
        grad.addColorStop(1, "transparent");
        bgCtx.strokeStyle = grad;
        bgCtx.lineWidth = 2;
        bgCtx.moveTo(m.x, m.y);
        bgCtx.lineTo(m.x - m.length, m.y - m.length);
        bgCtx.stroke();

        if (m.x > window.innerWidth || m.y > window.innerHeight) {
          m.x = Math.random() * window.innerWidth;
          m.y = Math.random() * window.innerHeight / 2;
        }
      });
    }
    setInterval(drawMeteors, 30);

    // ======================= ÊâìÂ≠óÂãïÁï´ =======================
    const messages = [
      "Surprise~~",
      "ÁÑ°Ë´ñÊòØÁîúÂìÅÈÇÑÊòØÈÄôÂÄã",
      "ÈÉΩÊòØÊàë‰∏ÄÊ¨°ÂºÑÂì¶",
      "Âà•Â´åÊ£ÑÂëÄ",
      "‰∏çÂ•ΩÂêÉ‰πüÂæóÂêÉ!!",
      "ÂòñÂòñ",
      "Â∏åÊúõ‰Ω†ÂñúÊ≠° üíñ",
      "Â¶ÇÊûúÊúâ‰∏ÄÂ§©ÈÅéÂæó‰∏çÂ¶ÇÊÑè‰∫Ü",
      "Âõû‰æÜÈÄôË£°ÁúãÁúãÂëÄ",
      "Âô¢~Â∞ç‰∫Ü",
      "ÁîüÊó•Âø´Ê®Ç ‚ú®"
    ];

    const messageDiv = document.getElementById("messages");
    let i = 0;

    function showMessage(text, isFinal) {
      const span = document.createElement("span");
      span.className = `message glow ${isFinal ? "final" : ""}`;
      messageDiv.appendChild(span);

      let j = 0;
      const interval = setInterval(() => {
        span.textContent += text[j++];
        if (j >= text.length) {
          clearInterval(interval);
          setTimeout(() => span.remove(), 2500);
        }
      }, 80);
    }

    // ======================= ÈªûÊìäÁ¶ÆÁâ©ÁõíÂàáÊèõÁÖôËä± =======================
    const gift = document.getElementById("gift");
    const fwCanvas = document.getElementById("fireworks");
    const fwCtx = fwCanvas.getContext("2d");
    const boom = document.getElementById("boom");

    function initFireworks() {
      fwCanvas.width = window.innerWidth;
      fwCanvas.height = window.innerHeight;
      let fireworks = [];

      function createFirework() {
        const x = Math.random() * fwCanvas.width;
        const y = Math.random() * fwCanvas.height / 2;
        const color = `hsl(${Math.random() * 360}, 100%, 70%)`;

        for (let i = 0; i < 80; i++) {
          fireworks.push({
            x,
            y,
            angle: (Math.PI * 2 * i) / 80,
            speed: Math.random() * 5 + 2,
            radius: 2,
            alpha: 1,
            color
          });
        }
        boom.currentTime = 0;
        boom.play();
      }

      function animateFireworks() {
        requestAnimationFrame(animateFireworks);
        fwCtx.fillStyle = "rgba(0, 0, 0, 0.2)";
        fwCtx.fillRect(0, 0, fwCanvas.width, fwCanvas.height);

        fireworks.forEach((p, index) => {
          const vx = Math.cos(p.angle) * p.speed;
          const vy = Math.sin(p.angle) * p.speed;
          p.x += vx;
          p.y += vy;
          p.alpha -= 0.015;

          fwCtx.beginPath();
          fwCtx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
          fwCtx.fillStyle = `rgba(${hexToRgb(p.color)}, ${p.alpha})`;
          fwCtx.fill();

          if (p.alpha <= 0) fireworks.splice(index, 1);
        });
      }

      setInterval(createFirework, 1500);
      animateFireworks();
    }

    function hexToRgb(hsl) {
      const ctx = document.createElement('canvas').getContext('2d');
      ctx.fillStyle = hsl;
      const rgb = ctx.fillStyle.match(/\d+/g);
      return rgb.slice(0, 3).join(',');
    }

    gift.addEventListener("click", () => {
      gift.style.display = "none";
      document.getElementById("bg").style.display = "none";
      initFireworks();

      let delay = 0;
      messages.forEach((msg, index) => {
        setTimeout(() => showMessage(msg, index === messages.length - 1), delay);
        delay += 3000;
      });
    });
  </script>
</body>
</html>
